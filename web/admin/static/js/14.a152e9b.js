(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{BoVZ:function(e,t,n){"use strict";n.r(t);var o=n("DgvE"),i={data:function(){return{type:"",filter:[{value:"1",label:"成绩查询"},{value:"2",label:"准考证领取"},{value:"3",label:"考场查询"},{value:"4",label:"考试报名"},{value:"5",label:"大赛通知"},{value:"6",label:"定向通知"}],publishInformDate:[],informHead:[{key:"id",name:"通知编号"},{key:"type",name:"通知类型"},{key:"content",name:"通知详情"},{key:"create_at",name:"发布时间"}],informListData:[],loadingInformList:!1,deleteid:[]}},methods:{queryInformList:function(e){var t=this;this.loadingInformList=!0,e=e||1;var n=o.a.filterDate(this.publishInformDate[0]),i=o.a.filterDate(this.publishInformDate[1]),a=this.type;this.$axios({url:"/inform/list",method:"post",data:{type:a,start_time:n,end_time:i,pn:e}}).then(function(e){console.log("查询通知列表",e),e&&!e.error&&(e.data.list.forEach(function(t){t.type=e.data.filter[t.type]}),t.$store.commit("informobject/setFilter",e.data.filter),t.informListData=e.data.list,t.loadingInformList=!1)}).catch(function(e){console.log(e),t.loadingInformList=!1})},editInfo:function(e){var t=this.$store.state.informobject.filter;console.log("filters",t);var n=this.filters.indexOf(e.row.type);console.log(n),this.$store.commit("informobject/setType",n),this.$store.commit("publishinfo/setquillContent",e.row.content),this.$router.push({name:"editInform",params:{inform_id:e.row.id,type:e.row.type,firstEdit:!0}})},deleteInfo:function(e){var t=this;this.loadingInformList=!0,this.$axios({url:"/inform/delete",method:"post",data:{id:[e.row.id]}}).then(function(e){e&&!e.error&&(t.queryInformList(),t.loadingInformList=!1)}).catch(function(e){console.log(e),t.loadingInformList=!1})},handleCurrentChange:function(e){this.queryInformList(e)},handleSelectionChange:function(e){var t=this;e&&e.forEach(function(e){t.deleteid.push(e.id)})},deleteOption:function(){var e=this;this.$axios({url:"/inform/delete",method:"post",data:{id:this.deleteid}}).then(function(t){t&&!t.error&&(e.queryInformList(),e.loadingInformList=!1)}).catch(function(t){console.log(t),e.loadingInformList=!1})}},computed:{filters:function(){return this.$store.state.informobject.filter}},mounted:function(){}},a=(n("etcX"),n("KHd+")),r=Object(a.a)(i,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"inform-list"},[n("div",{staticClass:"inform-header"},[n("el-row",[n("el-col",{attrs:{span:4}},[n("p",[e._v("通知类型：")]),e._v(" "),n("el-select",{model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},e._l(e.filter,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),n("el-col",{attrs:{span:6}},[n("p",[e._v("发布日期：")]),e._v(" "),n("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.publishInformDate,callback:function(t){e.publishInformDate=t},expression:"publishInformDate"}})],1),e._v(" "),n("el-col",{attrs:{span:8}},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){return t.preventDefault(),e.queryInformList(t)}}},[e._v("查询")])],1)],1)],1),e._v(" "),n("div",{staticClass:"inform-footer"},[n("table-data",{attrs:{isDelete:"true",deleteName:"删除",isSelected:"true",head:e.informHead,tableData:e.informListData,isOption:"true",loadingTable:e.loadingInformList,isEditTable:"true",isDeleteTable:"true",editTableName:"编辑",deleteTableName:"删除"},on:{editInfo:e.editInfo,deleteInfo:e.deleteInfo,handleCurrentChange:e.handleCurrentChange,handleSelectionChange:e.handleSelectionChange,deleteOption:e.deleteOption}})],1)])},[],!1,null,"9294b7ae",null);t.default=r.exports},DgvE:function(e,t,n){"use strict";var o={delIdArray:function(e,t){for(var n=0;n<e.length;n++)e[n].id==t&&e.splice(n,1);console.log("this.arr",e)},filterDate:function(e){return e?e.getFullYear()+"-"+(e.getMonth()+1>=10?e.getMonth()+1:"0"+(e.getMonth()+1))+"-"+(e.getDate()>=10?e.getDate():"0"+e.getDate()):""},filterDateTime:function(e){return e?e.getFullYear()+"-"+(e.getMonth()+1>=10?e.getMonth()+1:"0"+(e.getMonth()+1))+"-"+(e.getDate()>=10?e.getDate():"0"+e.getDate())+" "+(e.getHours()>=10?e.getHours():"0"+e.getHours())+":"+(e.getMinutes()>=10?e.getMinutes():"0"+e.getMinutes())+":"+(e.getSeconds()>=10?e.getSeconds():"0"+e.getSeconds()):""}};t.a=o},FKeT:function(e,t,n){},etcX:function(e,t,n){"use strict";var o=n("FKeT");n.n(o).a}}]);