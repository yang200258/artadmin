(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{VZbN:function(e,t,n){"use strict";n.r(t);var o=n("L2JU"),s=n("RJ3X"),r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},i={data:function(){return{loginForm:{name:"",password:"",captcha:""},loginRules:{name:[{required:!0,message:"",trigger:"blur"},{min:2,max:8,message:"长度在 2 到 8 个字符"}],password:[{required:!0,message:"",trigger:"blur"},{min:6,max:16,message:"长度在 6 到 16 个字符"},{pattern:/^(\w){6,20}$/,message:"只能输入6-20个字母、数字、下划线"}]},sysMsg:""}},computed:r({},Object(o.e)({lang:function(e){return e.lang},theme:function(e){return e.theme}})),watch:{},beforeMount:function(){this.setErrMsg()},methods:r({},Object(o.b)({login:"auth/login",getOption:"auth/getOption",getOrgan:"auth/getOrgan"}),{submitForm:function(){var e=this;this.$refs.loginForm.validate(function(t){if(console.log("valid",t),!t)return alert("请输入合法的用户名/密码"),!1;e.login({username:e.loginForm.name,password:e.loginForm.password}).then(function(t){t&&!t.err&&(e.$router.push("home"),e.getOption().then(function(t){console.log("成功获取操作信息",t),e.getOrgan().then(function(e){console.log("成功获取机构信息",e)}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)}))}).catch(function(t){console.log("登录失败相应",t),e.sysMsg=t.msg})})},changeTheme:function(e){e!=this.lang&&(Object(s.a)(e),this.$store.commit("setThemeColor",e))},setErrMsg:function(){this.loginRules.name[0].message=this.$t("global.errMsg.inputRequired",{cont:this.$t("global.username")}),this.loginRules.password[0].message=this.$t("global.errMsg.inputRequired",{cont:this.$t("global.password")})}})},a=(n("eA8E"),n("KHd+")),l=Object(a.a)(i,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sys-login"},[n("div",{staticClass:"login-area"},[n("div",{staticClass:"form-group"},[n("el-form",{ref:"loginForm",attrs:{model:e.loginForm,rules:e.loginRules,"label-position":"left","label-width":"0px"}},[n("el-form-item",{attrs:{prop:"name"}},[n("el-input",{attrs:{type:"text",placeholder:"请输入用户名"},model:{value:e.loginForm.name,callback:function(t){e.$set(e.loginForm,"name",t)},expression:"loginForm.name"}})],1),e._v(" "),n("el-form-item",{attrs:{prop:"password"}},[n("el-input",{attrs:{type:"password",placeholder:"请输入密码"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.submitForm()}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),e._v(" "),n("a",{staticClass:"btn-login",attrs:{type:"primary"},on:{click:function(t){e.submitForm()}}},[e._v(e._s(e.$t("global.login")))])],1),e._v(" "),n("div",{staticClass:"err-msg"},[e._v(e._s(e.sysMsg))])],1)])])},[],!1,null,null,null);t.default=l.exports},eA8E:function(e,t,n){"use strict";var o=n("yJEu");n.n(o).a},yJEu:function(e,t,n){}}]);