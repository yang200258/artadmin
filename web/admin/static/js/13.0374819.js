(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"B+hv":function(t,e,o){"use strict";var i=o("lT11"),n=(o("p1OT"),o("gJae"),o("FOEY"),{data:function(){return{editorOption:{placeholder:"",theme:"snow"}}},components:{quillEditor:i.quillEditor},computed:{quillContent:function(){return this.$store.state.publishinfo.quillContent}},methods:{editContent:function(t){console.log("event",t),this.$store.commit("publishinfo/setquillContent",t.html)}}}),r=(o("VTf6"),o("KHd+")),a=Object(r.a)(n,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"richtext"},[o("el-row",[o("el-col",{attrs:{span:16}},[o("span",{staticStyle:{color:"red"}},[t._v("*")]),o("span",[t._v("内容：")]),t._v(" "),o("quill-editor",{staticClass:"richedit",staticStyle:{height:"400px"},attrs:{value:t.quillContent,options:t.editorOption},on:{change:function(e){t.editContent(e)}}})],1)],1)],1)},[],!1,null,"ca9ddb94",null);e.a=a.exports},DdAN:function(t,e,o){},"LqB/":function(t,e,o){"use strict";var i=o("DdAN");o.n(i).a},VTf6:function(t,e,o){"use strict";var i=o("iPae");o.n(i).a},iPae:function(t,e,o){},tErt:function(t,e,o){"use strict";o.r(e);var i={data:function(){return{informTypeOption:[{value:"1",label:"成绩查询"},{value:"2",label:"准考证领取"},{value:"3",label:"考场查询"},{value:"4",label:"考试报名"},{value:"5",label:"大赛通知"},{value:"6",label:"定向通知"}],uid_arr:[]}},components:{richtext:o("B+hv").a},mounted:function(){this.getInform(),this.$route.params.uid_arr&&this.$route.params.uid_arr.length&&(this.uid_arr=this.$route.params.uid_arr)},methods:{back:function(){this.$router.push({name:"informlist"})},changeType:function(t){this.$store.commit("informobject/setType",t)},getInform:function(){var t=this,e=this.$route.params.inform_id;this.$axios({url:"/inform/object/list",method:"post",data:{inform_id:e}}).then(function(e){console.log("获取单条通知数据",e),e&&!e.error&&(t.uid_arr=[],t.$route.params.firstEdit&&t.$store.commit("informobject/seteditInformobject",e.data.list),e.data.list.forEach(function(e){t.uid_arr.push(e.uid)}))})},save:function(){var t=this,e=this.$route.params,o=e.inform_id,i=e.uid_arr,n=this.$store.state.informobject.type,r=this.$store.state.publishinfo.quillContent;this.$axios({url:"/inform/edit",method:"post",data:{type:n,content:r,id:o,uid_arr:i}}).then(function(e){console.log("编辑通知响应",e),e&&!e.error&&(t.$store.commit("informobject/setType",0),t.$store.commit("publishinfo/setquillContent",""),t.$store.commit("informobject/seteditInformobject",[]),t.$router.push({name:"informlist"}))}).catch(function(t){console.log(t)})},goInform:function(){var t=this.$route.params.inform_id||"",e=this.$route.params.uid_arr||this.uid_arr||[];console.log("uid_arr",e),t&&e&&e.length?this.$router.push({name:"editinformObject",params:{inform_id:t,uid_arr:e}}):alert("通知编号或通知对象不存在，请检查！")}},computed:{type:function(){return this.$store.state.informobject.type},filters:function(){return this.$store.state.informobject.filter}}},n=(o("LqB/"),o("KHd+")),r=Object(n.a)(i,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"edit-inform"},[o("el-row",[o("span",{staticStyle:{color:"red"}},[t._v("*")]),o("span",[t._v("通知类型：")]),t._v(" "),o("el-select",{attrs:{value:t.filters[t.type],placeholder:"请选择通知类型"},on:{change:t.changeType}},t._l(t.informTypeOption,function(t){return o("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),o("el-row",[o("span",{staticStyle:{color:"red"}},[t._v("*")]),o("span",[t._v("通知对象：")]),t._v(" "),o("span",{staticClass:"clickStyle",on:{click:function(e){return e.preventDefault(),t.goInform(e)}}},[t._v("点此查看")])]),t._v(" "),o("richtext"),t._v(" "),o("el-row",{staticClass:"footer"},[o("el-col",{attrs:{offset:8}},[o("el-button",{attrs:{type:"back"},on:{click:t.back}},[t._v("返回")]),t._v(" "),o("el-button",{attrs:{type:"save"},on:{click:t.save}},[t._v("保存")])],1)],1)],1)},[],!1,null,"5e9e9090",null);e.default=r.exports}}]);