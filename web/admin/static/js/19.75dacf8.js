(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{AS7G:function(t,e,i){"use strict";var a=i("Clp8"),s=i("L2JU"),o={data:function(){return{infoTypeOptions:[],intro:"",dialogImageUrl:"",dialogVisible:!1,fileLists:[],uploaddata:{},cover_id:""}},mounted:function(){this.uploaddata={token:a.a.hasToken()},this.getTypeList(),this.$route.params.url&&(this.fileLists=[{name:"title",url:this.$route.params.url}])},computed:(Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t})({publishData:function(){return this.$store.state.publishinfo.publishData}},Object(s.c)({gettitleNumber:"publishinfo/gettitleNumber",getintroductionNumber:"publishinfo/getintroductionNumber"})),methods:{descInput:function(){},descInput2:function(){},handleRemove:function(t,e){console.log(t,e)},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,console.log(this.dialogImageUrl),this.dialogVisible=!0},success:function(t){console.log(t),t&&!t.error&&(this.publishData.cover_id=t.data.id[0])},exceed:function(){return alert("仅允许上传一张图片"),!1},getTypeList:function(){var t=this;this.$axios({url:"/msg/category/list",method:"post",data:{}}).then(function(e){console.log("获取到的信息分类列表",e),e&&!e.error&&(t.infoTypeOptions=e.data)}).catch(function(t){console.log(t)})}}},n=(i("Sg23"),i("KHd+")),l=Object(n.a)(o,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[i("el-row",{staticClass:"infoType"},[i("span",{staticStyle:{color:"red"}},[t._v("*")]),i("span",[t._v("信息分类：")]),t._v(" "),i("el-select",{attrs:{placeholder:"请选择信息类型"},model:{value:t.publishData.cid,callback:function(e){t.$set(t.publishData,"cid",e)},expression:"publishData.cid"}},t._l(t.infoTypeOptions,function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),i("el-row",{staticClass:"infoTitle"},[i("el-col",{attrs:{span:1}},[i("span",{staticStyle:{color:"red"}},[t._v("*")]),i("span",[t._v("标题：")])]),t._v(" "),i("el-col",{attrs:{span:8}},[i("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入内容"},on:{input:t.descInput},model:{value:t.publishData.title,callback:function(e){t.$set(t.publishData,"title",e)},expression:"publishData.title"}})],1)],1),t._v(" "),i("el-row",{staticClass:"alnumber"},[i("el-col",{attrs:{offset:8,span:2}},[i("div",{staticStyle:{color:"#bbb"}},[t._v("已填写"),i("span",{staticStyle:{color:"red"}},[t._v(t._s(t.gettitleNumber))]),t._v("个字")])])],1),t._v(" "),i("el-row",{staticClass:"infoImage"},[i("span",[t._v("封面图：")]),t._v(" "),i("el-upload",{attrs:{name:"file",action:"api/upload",limit:1,accept:".jpg,.png","list-type":"picture-card",data:t.uploaddata,"file-list":t.fileLists,"on-exceed":t.exceed,"on-preview":t.handlePictureCardPreview,"on-success":t.success,"on-remove":t.handleRemove}},[i("i",{staticClass:"el-icon-plus"})]),t._v(" "),i("el-dialog",{attrs:{visible:t.dialogVisible,modal:!1,title:"查看大图片"},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1),t._v(" "),i("el-row",{staticClass:"introduction"},[i("el-col",{attrs:{span:1}},[i("span",{staticStyle:{color:"red"}},[t._v("*")]),i("span",[t._v("引言：")])]),t._v(" "),i("el-col",{attrs:{span:8}},[i("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入内容"},on:{input:t.descInput2},model:{value:t.publishData.intro,callback:function(e){t.$set(t.publishData,"intro",e)},expression:"publishData.intro"}})],1)],1),t._v(" "),i("el-row",{staticClass:"alnumber"},[i("el-col",{attrs:{offset:8,span:2}},[i("div",{staticStyle:{color:"#bbb"}},[t._v("已填写"),i("span",{staticStyle:{color:"red"}},[t._v(t._s(t.getintroductionNumber))]),t._v("个字")])])],1)],1)},[],!1,null,"b6856ebe",null);e.a=l.exports},"B+hv":function(t,e,i){"use strict";var a=i("lT11"),s=(i("p1OT"),i("gJae"),i("FOEY"),{data:function(){return{editorOption:{placeholder:"",theme:"snow"}}},components:{quillEditor:a.quillEditor},computed:{quillContent:function(){return this.$store.state.publishinfo.quillContent}},methods:{editContent:function(t){console.log("event",t),this.$store.commit("publishinfo/setquillContent",t.html)}}}),o=(i("VTf6"),i("KHd+")),n=Object(o.a)(s,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"richtext"},[i("el-row",[i("el-col",{attrs:{span:16}},[i("span",{staticStyle:{color:"red"}},[t._v("*")]),i("span",[t._v("内容：")]),t._v(" "),i("quill-editor",{staticClass:"richedit",staticStyle:{height:"400px"},attrs:{value:t.quillContent,options:t.editorOption},on:{change:function(e){t.editContent(e)}}})],1)],1)],1)},[],!1,null,"ca9ddb94",null);e.a=n.exports},Sg23:function(t,e,i){"use strict";var a=i("WTK3");i.n(a).a},VTf6:function(t,e,i){"use strict";var a=i("iPae");i.n(a).a},WTK3:function(t,e,i){},ax7m:function(t,e,i){"use strict";i.r(e);var a=i("AS7G"),s=i("B+hv"),o=i("L2JU"),n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},l={data:function(){return{status:1}},components:{info:a.a,richtext:s.a},mounted:function(){this.cleardata()},methods:n({publish:function(){this.addData(1)},saveExample:function(){this.addData(2)}},Object(o.d)({cleardata:"publishinfo/cleardata"}),{addData:function(t){var e=this,i=this.$store.state.publishinfo.publishData,a=this.$store.state.publishinfo.quillContent;i.status=t,i.content=a,this.$axios({method:"post",url:"/msg/add",data:i}).then(function(t){console.log("添加数据响应",t),t&&!t.error&&e.$router.push({name:"infoList"})}).catch(function(t){console.log(t)})}})},r=(i("uMbE"),i("KHd+")),c=Object(r.a)(l,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container"},[e("info",{staticClass:"info"}),this._v(" "),e("richtext",{staticClass:"richtext"}),this._v(" "),e("el-row",{staticClass:"footer"},[e("el-col",{attrs:{offset:8}},[e("el-button",{on:{click:this.publish}},[this._v("发布")]),this._v(" "),e("el-button",{on:{click:this.saveExample}},[this._v("存草稿")])],1)],1)],1)},[],!1,null,"bb7879b2",null);e.default=c.exports},eX9j:function(t,e,i){},iPae:function(t,e,i){},uMbE:function(t,e,i){"use strict";var a=i("eX9j");i.n(a).a}}]);