(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{ARj4:function(e,a,t){},VpoL:function(e,a,t){"use strict";var s=t("ARj4");t.n(s).a},kbUi:function(e,a,t){"use strict";t.r(a);var s={data:function(){return{id:"",name:"",organ_name:"",username:"",phone:"",currentPage:1,totalNumber:0,pageSize:50,head:[{key:"organ_name",name:"机构名称"},{key:"organ_address",name:"机构地址"},{key:"name",name:"联系人"},{key:"phone",name:"联系电话"},{key:"username",name:"官网登录账号"},{key:"create_at",name:"添加时间"}],oganizationData:[],loadingOganization:!1,isResetPassword:!1,resetForm:{password:"",repeat_password:""},rules:{password:[{required:!0,message:"请输入密码",trigger:"blur"}],repeat_password:[{required:!0,message:"请再次输入密码",trigger:"blur"}]}}},methods:{handleCurrentChange:function(e){this.queryOganization(e)},queryOganization:function(e){var a=this;this.loadingOganization=!0;var t=this.name,s=this.organ_name,o=this.phone,r=this.username;e=e||"1",this.$axios({url:"/manager/organ/list",method:"post",data:{name:t,organ_name:s,phone:o,username:r,pn:e}}).then(function(e){console.log("查询到机构列表",e),e&&!e.error?(a.oganizationData=e.data.list,a.pageSize=e.data.page.limit,a.currentPage=e.data.page.pn,a.totalNumber=e.data.page.total):alert(e.msg),a.loadingOganization=!1}).catch(function(e){console.log(e),a.loadingOganization=!1})},addOganization:function(){this.$router.push({name:"addoganization"})},resetPassword:function(e){this.id=e.row.id,this.password="",this.repeat_password="",this.isResetPassword=!0},editAccount:function(e){e.row.phone=e.row.phone.split(","),this.$router.push({name:"editOganization",params:{oganizationData:e.row}})},deleteAccount:function(){},handleClose:function(){this.resetForm.password="",this.resetForm.repeat_password="",this.isResetPassword=!1},cancelReset:function(){this.resetForm.password="",this.resetForm.repeat_password="",this.isResetPassword=!1},submitForm:function(e){var a=this,t=e.password,s=e.repeat_password,o=this.id;this.$refs.resetForm.validate(function(e){e&&a.$axios({url:"/manager/organ/reset",method:"post",data:{password:t,repeat_password:s,id:o}}).then(function(e){e&&e.error,alert(e.msg),a.resetForm.password="",a.resetForm.repeat_password="",a.isResetPassword=!1}).catch(function(e){console.log(e)})})}}},o=(t("VpoL"),t("KHd+")),r=Object(o.a)(s,function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"oganization-container"},[t("div",{staticClass:"oganization-header"},[t("el-row",[t("el-col",{attrs:{span:4}},[t("p",[e._v("机构名称：")]),e._v(" "),t("el-input",{attrs:{placeholder:"机构名称"},model:{value:e.organ_name,callback:function(a){e.organ_name=a},expression:"organ_name"}})],1),e._v(" "),t("el-col",{attrs:{span:4,offset:1}},[t("p",[e._v("联系人：")]),e._v(" "),t("el-input",{attrs:{placeholder:"联系人"},model:{value:e.name,callback:function(a){e.name=a},expression:"name"}})],1),e._v(" "),t("el-col",{attrs:{span:4,offset:1}},[t("p",[e._v("联系电话：")]),e._v(" "),t("el-input",{attrs:{placeholder:"联系电话"},model:{value:e.phone,callback:function(a){e.phone=a},expression:"phone"}})],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:4}},[t("p",[e._v("登录账号：")]),e._v(" "),t("el-input",{attrs:{placeholder:"请输入登录账号"},model:{value:e.username,callback:function(a){e.username=a},expression:"username"}})],1),e._v(" "),t("el-col",{attrs:{span:4,offset:1}},[t("el-button",{attrs:{type:"primary"},on:{click:e.queryOganization}},[e._v("查询")])],1)],1)],1),e._v(" "),t("div",{staticClass:"oganization-content"},[t("table-data",{attrs:{isPagination:"true",currentPage:e.currentPage,totalNumber:e.totalNumber,pageSize:e.pageSize,isEdit:"true",editName:"添加机构",head:e.head,tableData:e.oganizationData,loadingTable:e.loadingOganization,isOption:"true",isEditTable:"true",isEditAccount:"true",isDeleteTable:"true",editTableName:"重置密码",editAccountName:"编辑",deleteTableName:"删除账号"},on:{editOption:e.addOganization,editInfo:e.resetPassword,editAccount:e.editAccount,deleteInfo:e.deleteAccount,handleCurrentChange:e.handleCurrentChange}}),e._v(" "),t("el-dialog",{staticClass:"reset-password",attrs:{title:"重置密码",visible:e.isResetPassword,width:"30%","before-close":e.handleClose},on:{"update:visible":function(a){e.isResetPassword=a}}},[t("div",{staticClass:"reset-header"},[t("el-form",{ref:"resetForm",attrs:{model:e.resetForm,rules:e.rules}},[t("el-form-item",{attrs:{label:"输入密码",prop:"password"}},[t("el-row",[t("el-input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.resetForm.password,callback:function(a){e.$set(e.resetForm,"password",a)},expression:"resetForm.password"}})],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"再次输入密码",prop:"repeat_password"}},[t("el-row",[t("el-input",{attrs:{type:"password",placeholder:"请再次输入密码"},model:{value:e.resetForm.repeat_password,callback:function(a){e.$set(e.resetForm,"repeat_password",a)},expression:"resetForm.repeat_password"}})],1)],1),e._v(" "),t("el-form-item",[t("el-button",{on:{click:e.cancelReset}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:function(a){e.submitForm(e.resetForm)}}},[e._v("确定")])],1)],1)],1)])],1)])},[],!1,null,"32e769aa",null);a.default=r.exports}}]);