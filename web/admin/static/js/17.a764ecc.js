(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{AS7G:function(t,e,i){"use strict";var o=i("Clp8"),s=i("L2JU"),a={data:function(){return{infoTypeOptions:[],intro:"",dialogImageUrl:"",dialogVisible:!1,fileLists:[],uploaddata:{},cover_id:""}},mounted:function(){this.uploaddata={token:o.a.hasToken()},this.getTypeList(),this.$route.params.url&&(this.fileLists=[{name:"title",url:this.$route.params.url}])},computed:(Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o])}return t})({publishData:function(){return this.$store.state.publishinfo.publishData}},Object(s.c)({gettitleNumber:"publishinfo/gettitleNumber",getintroductionNumber:"publishinfo/getintroductionNumber"})),methods:{descInput:function(){},descInput2:function(){},handleRemove:function(t,e){console.log(t,e)},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,console.log(this.dialogImageUrl),this.dialogVisible=!0},success:function(t){console.log(t),t&&!t.error&&(this.publishData.cover_id=t.data.id[0])},exceed:function(){return alert("仅允许上传一张图片"),!1},getTypeList:function(){var t=this;this.$axios({url:"/msg/category/list",method:"post",data:{}}).then(function(e){console.log("获取到的信息分类列表",e),e&&!e.error&&(t.infoTypeOptions=e.data)}).catch(function(t){console.log(t)})}}},n=(i("Sg23"),i("KHd+")),l=Object(n.a)(a,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[i("el-row",{staticClass:"infoType"},[i("span",{staticStyle:{color:"red"}},[t._v("*")]),i("span",[t._v("信息分类：")]),t._v(" "),i("el-select",{attrs:{placeholder:"请选择信息类型"},model:{value:t.publishData.cid,callback:function(e){t.$set(t.publishData,"cid",e)},expression:"publishData.cid"}},t._l(t.infoTypeOptions,function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),i("el-row",{staticClass:"infoTitle"},[i("el-col",{attrs:{span:1}},[i("span",{staticStyle:{color:"red"}},[t._v("*")]),i("span",[t._v("标题：")])]),t._v(" "),i("el-col",{attrs:{span:8}},[i("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入内容"},on:{input:t.descInput},model:{value:t.publishData.title,callback:function(e){t.$set(t.publishData,"title",e)},expression:"publishData.title"}})],1)],1),t._v(" "),i("el-row",{staticClass:"alnumber"},[i("el-col",{attrs:{offset:8,span:2}},[i("div",{staticStyle:{color:"#bbb"}},[t._v("已填写"),i("span",{staticStyle:{color:"red"}},[t._v(t._s(t.gettitleNumber))]),t._v("个字")])])],1),t._v(" "),i("el-row",{staticClass:"infoImage"},[i("span",[t._v("封面图：")]),t._v(" "),i("el-upload",{attrs:{name:"file",action:"api/upload",limit:1,accept:".jpg,.png","list-type":"picture-card",data:t.uploaddata,"file-list":t.fileLists,"on-exceed":t.exceed,"on-preview":t.handlePictureCardPreview,"on-success":t.success,"on-remove":t.handleRemove}},[i("i",{staticClass:"el-icon-plus"})]),t._v(" "),i("el-dialog",{attrs:{visible:t.dialogVisible,modal:!1,title:"查看大图片"},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1),t._v(" "),i("el-row",{staticClass:"introduction"},[i("el-col",{attrs:{span:1}},[i("span",{staticStyle:{color:"red"}},[t._v("*")]),i("span",[t._v("引言：")])]),t._v(" "),i("el-col",{attrs:{span:8}},[i("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入内容"},on:{input:t.descInput2},model:{value:t.publishData.intro,callback:function(e){t.$set(t.publishData,"intro",e)},expression:"publishData.intro"}})],1)],1),t._v(" "),i("el-row",{staticClass:"alnumber"},[i("el-col",{attrs:{offset:8,span:2}},[i("div",{staticStyle:{color:"#bbb"}},[t._v("已填写"),i("span",{staticStyle:{color:"red"}},[t._v(t._s(t.getintroductionNumber))]),t._v("个字")])])],1)],1)},[],!1,null,"b6856ebe",null);e.a=l.exports},Asu8:function(t,e,i){},"B+hv":function(t,e,i){"use strict";var o=i("lT11"),s=(i("p1OT"),i("gJae"),i("FOEY"),{data:function(){return{editorOption:{placeholder:"",theme:"snow"}}},components:{quillEditor:o.quillEditor},computed:{quillContent:function(){return this.$store.state.publishinfo.quillContent}},methods:{editContent:function(t){console.log("event",t),this.$store.commit("publishinfo/setquillContent",t.html)}}}),a=(i("VTf6"),i("KHd+")),n=Object(a.a)(s,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"richtext"},[i("el-row",[i("el-col",{attrs:{span:16}},[i("span",{staticStyle:{color:"red"}},[t._v("*")]),i("span",[t._v("内容：")]),t._v(" "),i("quill-editor",{staticClass:"richedit",staticStyle:{height:"400px"},attrs:{value:t.quillContent,options:t.editorOption},on:{change:function(e){t.editContent(e)}}})],1)],1)],1)},[],!1,null,"ca9ddb94",null);e.a=n.exports},Sg23:function(t,e,i){"use strict";var o=i("WTK3");i.n(o).a},VTf6:function(t,e,i){"use strict";var o=i("iPae");i.n(o).a},WTK3:function(t,e,i){},WZCj:function(t,e,i){"use strict";i.r(e);var o=i("AS7G"),s=i("B+hv"),a=i("L2JU"),n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o])}return t},l={data:function(){return{}},mounted:function(){this.cleardata(),this.getInfo()},components:{info:o.a,richtext:s.a},computed:{publishData:function(){return this.$store.publishinfo.publishData}},methods:n({getInfo:function(){var t=this;this.$axios({url:"/msg/detail",method:"post",data:{id:this.$route.params.id}}).then(function(e){console.log("信息详情数据",e),e&&!e.error&&(t.$store.commit("publishinfo/setPublishData",e.data),t.$store.commit("publishinfo/setquillContent",e.data.content))}).catch(function(t){console.log(t)})}},Object(a.d)({cleardata:"publishinfo/cleardata"}),{back:function(){this.$router.go(-1)},saveEdit:function(){var t=this,e=this.$store.state.publishinfo.publishData,i=this.$store.state.publishinfo.quillContent;e.content=i,e.id=this.$route.params.id,this.$axios({method:"post",url:"/msg/edit",data:e}).then(function(e){console.log("保存信息响应",e),e&&!e.error&&t.$router.push({name:"infoList"})}).catch(function(t){console.log(t)})}})},r=(i("rcyg"),i("KHd+")),c=Object(r.a)(l,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container"},[e("info"),this._v(" "),e("richtext",{staticClass:"richtext"}),this._v(" "),e("el-row",{staticClass:"footer"},[e("el-col",{attrs:{offset:8}},[e("el-button",{on:{click:this.back}},[this._v("返回")]),this._v(" "),e("el-button",{on:{click:this.saveEdit}},[this._v("保存修改")])],1)],1)],1)},[],!1,null,"77050e4a",null);e.default=c.exports},iPae:function(t,e,i){},rcyg:function(t,e,i){"use strict";var o=i("Asu8");i.n(o).a}}]);